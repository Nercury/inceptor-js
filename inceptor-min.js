!function(t){"use strict";function n(){this.loadedList={},this.constructors={},this.instanceQueue=[],this.unfinishedInceptions={},this.creatingDependencies=!1,this.load(arguments)}function e(t,n){function e(t){u.push(t)}for(var r,o,s,u=[];n.length>0;){for(r=0;r<n.length;r++)if(s=n[r],c.isArray(s))for(o=0;o<s.length;o++)u.push(s[o]);else i(t,s,e);n=u,u=[]}}function i(t,n,e){var i,o,c;if("undefined"==typeof n)throw new Error("Trying to load undefined value as Scope.");if(!n.hasOwnProperty("typeId"))throw new Error("Failed to load Scope - received object with no typeId.");if(t.loaded)throw new Error("Should not load more scopes after any of the loaded scopes were created.");if(!t.loadedList.hasOwnProperty(n.typeId))if(t.loadedList[n.typeId]=!0,0===n.dependencies.length);else if(1===n.dependencies.length)c=n.dependencies[0],r(t,c)[n.typeId]=function(e){t.instanceQueue.push(new n(e))},e(c);else for(o=new s(n,function(e){t.instanceQueue.push(u.construct(n,e))}),o.onStart(function(n,e){t.unfinishedInceptions[n]=e}),o.onFinish(function(n){delete t.unfinishedInceptions[n]}),i=0;i<n.dependencies.length;i++)c=n.dependencies[i],r(t,c)[n.typeId]=o.createAndPushArgHook(i),e(c)}function r(t,n){if(t.constructors.hasOwnProperty(n.typeId))return t.constructors[n.typeId];var e={};return t.constructors[n.typeId]=e,e}function o(t){var n,e,i,r,o,s,u,a=[];if(!t.creatingDependencies){for(t.creatingDependencies=!0;t.instanceQueue.length>0||c.size(t.unfinishedInceptions)>0;){for(;t.instanceQueue.length>0;)for(i=t.instanceQueue,t.instanceQueue=[],n=0;n<i.length;n++)if(r=i[n],o=r.constructor,s=o.typeId,a.push(r),t.constructors.hasOwnProperty(s))for(u=c.keys(t.constructors[s]),e=0;e<u.length;e++)t.constructors[s][u[e]](r);for(;c.size(t.unfinishedInceptions)>0;)for(u=c.keys(t.unfinishedInceptions),n=0;n<u.length;n++)t.unfinishedInceptions[u[n]].finish()}for(t.creatingDependencies=!1,n=0;n<a.length;n++)a[n].ready()}}function s(t,n){this.Scope=t,this.typeId=t.typeId,this.newInstanceCallback=n,this.instances=[],this.newInstances=[],this.created=[],this.started=!1,this.onStartCallback=null,this.onFinishCallback=null}var c={},u={},a=1;t.scope=function(){var t=function(){this.initialize.apply(this,arguments)};t.typeId=a,a+=1;var n,e=c.isArray(arguments[0]),i=[];e?(n=arguments[1],i=arguments[0]):n=arguments[0],t.dependencies=i;var r=c.isFunction(n)?{initialize:function(){n.apply(this,arguments)}}:n;return c.extend(t.prototype,{initialize:function(){},ready:function(){}},r),t},t.Deps=n,t.load=function(){return u.construct(n,arguments)},n.prototype.load=function(t){e(this,t)},n.prototype.create=function(t,n){var e=u.construct(t,n);return this.instanceQueue.push(e),o(this),e},s.prototype.createAndPushArgHook=function(t){return this.instances.push(null),this.newInstances.push(null),this.created.push(!1),function(n){this.created[t]=!0,this.newInstances[t]=n,this.started||(null!==this.onStartCallback&&this.onStartCallback(this.typeId,this),this.started=!0)}.bind(this)},s.prototype.finish=function(){var t,n=!0;for(t=0;t<this.created.length;t++)if(!this.created[t]){n=!1;break}if(n){for(t=0;t<this.instances.length;t++)null!==this.newInstances[t]&&(this.instances[t]=this.newInstances[t]);for(this.newInstanceCallback(this.instances),t=0;t<this.newInstances.length;t++)this.newInstances[t]=null}null!==this.onFinishCallback&&this.onFinishCallback(this.typeId),this.started=!1},s.prototype.onStart=function(t){this.onStartCallback=t},s.prototype.onFinish=function(t){this.onFinishCallback=t};var h=Array.isArray,p=Object.keys,l=Object.prototype,f=l.toString,d=l.hasOwnProperty,y=function(t){return function(n){return null==n?void 0:n[t]}},g=Math.pow(2,53)-1,I=y("length"),w=function(t){var n=I(t);return"number"==typeof n&&n>=0&&g>=n};c.isFunction=function(t){return"[object Function]"===f.call(t)};var v="undefined"!=typeof document&&document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof v&&(c.isFunction=function(t){return"function"==typeof t||!1}),c.isArray=h||function(t){return"[object Array]"===f.call(t)},c.isObject=function(t){var n=typeof t;return"function"===n||"object"===n&&!!t};var b=!{toString:null}.propertyIsEnumerable("toString"),k=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],m=function(t,n){var e=k.length,i=t.constructor,r=c.isFunction(i)&&i.prototype||l,o="constructor";for(c.has(t,o)&&!c.contains(n,o)&&n.push(o);e--;)o=k[e],o in t&&t[o]!==r[o]&&!c.contains(n,o)&&n.push(o)};c.has=function(t,n){return null!=t&&d.call(t,n)},c.keys=function(t){if(!c.isObject(t))return[];if(p)return p(t);var n=[];for(var e in t)c.has(t,e)&&n.push(e);return b&&m(t,n),n},c.allKeys=function(t){if(!c.isObject(t))return[];var n=[];for(var e in t)n.push(e);return b&&m(t,n),n},c.size=function(t){return null==t?0:w(t)?t.length:c.keys(t).length};var S=function(t,n){return function(e){var i=arguments.length;if(n&&(e=Object(e)),2>i||null==e)return e;for(var r=1;i>r;r++)for(var o=arguments[r],s=t(o),c=s.length,u=0;c>u;u++){var a=s[u];n&&e[a]!==void 0||(e[a]=o[a])}return e}};c.extend=S(c.allKeys),u.construct=function(t,n){function e(){return t.apply(this,n)}return e.prototype=t.prototype,new e},"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(t){var n=Array.prototype.slice.call(arguments,1),e=this,i=function(){},r=function(){return e.apply(this instanceof i?this:t||{},n.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype||{},r.prototype=new i,r})}("object"==typeof window?window.di={}:this);
//# sourceMappingURL= 